<!DOCTYPE html><html class="theme-next muse use-motion" lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><style>.pace .pace-progress{background:#1e92fb;height:3px}.pace .pace-progress-inner{box-shadow:0 0 10px #1e92fb,0 0 5px #1e92fb}.pace .pace-activity{border-top-color:#1e92fb;border-left-color:#1e92fb}</style><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.ico?v=6.3.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.ico?v=6.3.0"><link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"6.3.0",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!0,onmobile:!0},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="JavaScript是一种运行在浏览器中的解释型的编程语言。JavaScript是世界上最流行的脚本语言，因为你在电脑、手机、平板上浏览的所有的网页，以及无数基于HTML5的手机App，交互逻辑都是由JavaScript驱动的。"><meta name="keywords" content="JavaScript"><meta property="og:type" content="article"><meta property="og:title" content="JavaScript"><meta property="og:url" content="http://deepcreator.com/AI/JavaScript.html"><meta property="og:site_name" content="Ai Lab"><meta property="og:description" content="JavaScript是一种运行在浏览器中的解释型的编程语言。JavaScript是世界上最流行的脚本语言，因为你在电脑、手机、平板上浏览的所有的网页，以及无数基于HTML5的手机App，交互逻辑都是由JavaScript驱动的。"><meta property="og:locale" content="en"><meta property="og:image" content="http://p53s4d2qk.bkt.clouddn.com/JavaScriptIntroduction.jpg?imageMogr2/thumbnail/!75p"><meta property="og:image" content="http://p53s4d2qk.bkt.clouddn.com/machinelearning2018050702.jpg?imageMogr2/thumbnail/!75p"><meta property="og:updated_time" content="2018-06-19T03:35:44.964Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="JavaScript"><meta name="twitter:description" content="JavaScript是一种运行在浏览器中的解释型的编程语言。JavaScript是世界上最流行的脚本语言，因为你在电脑、手机、平板上浏览的所有的网页，以及无数基于HTML5的手机App，交互逻辑都是由JavaScript驱动的。"><meta name="twitter:image" content="http://p53s4d2qk.bkt.clouddn.com/JavaScriptIntroduction.jpg?imageMogr2/thumbnail/!75p"><link rel="alternate" href="/atom.xml" title="Ai Lab" type="application/atom+xml"><link rel="canonical" href="http://deepcreator.com/AI/JavaScript.html"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>JavaScript | Ai Lab</title><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?5aaaaf5c9bcea80a5c7d7a057b2d36b3";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)}()</script><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="en"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta custom-logo"><div class="site-meta-headline"> <a><img class="custom-logo-image" src="http://p53s4d2qk.bkt.clouddn.com/deepcreator220180502.JPG" alt="Ai Lab"></a></div><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Ai Lab</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">Minority, Right, Value</p></div><div class="site-nav-toggle"> <button aria-label="Toggle navigation bar"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>Categories</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>Tags</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-info-circle"></i><br>About</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>Search</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://deepcreator.com/AI/JavaScript.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Author"><meta itemprop="description" content="Chief IPR Officer in AI Age"><meta itemprop="image" content="/img/headonhill.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ai Lab"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">JavaScript</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2018-05-03 14:08:06" itemprop="dateCreated datePublished" datetime="2018-05-03T14:08:06+08:00">2018-05-03</time> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2018-06-19 11:35:44" itemprop="dateModified" datetime="2018-06-19T11:35:44+08:00">2018-06-19</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <a href="/AI/JavaScript.html#comments" itemprop="discussionUrl"><span class="post-meta-item-text">Comments:</span><span class="post-comments-count valine-comment-count" data-xid="/AI/JavaScript.html" itemprop="commentCount"></span></a></span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i> Views:<span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="http://p53s4d2qk.bkt.clouddn.com/JavaScriptIntroduction.jpg?imageMogr2/thumbnail/!75p" alt="JavaScriptIntroduction.jpg"></p><blockquote><p> JavaScript是一种运行在浏览器中的解释型的编程语言。JavaScript是世界上最流行的脚本语言，因为你在电脑、手机、平板上浏览的所有的网页，以及无数基于HTML5的手机App，交互逻辑都是由JavaScript驱动的。</p></blockquote><a id="more"></a><head><script src="/js/src/folder2tree.js"></script><script src="/js/src/head.min.js"></script><script>head.load("/js/src/Chart.js","/js/src/three.min.js")</script></head><body><div id="ctn"></div><script>folder2tree.init(document.getElementById("ctn"),[{img:["sprite.png","bg.png"]},{js:[{common:["jquery.js",{highcharts:[{modules:["exporting.js"]},"highcharts.js"]}]},{index:["mian.js",{modules:["mod.video.js"]}]}]},{css:["base.css","index-main.css","index-video.css"]},"index.html","favicon.ico"])</script><canvas id="myChart" width="400" height="400"></canvas><canvas id="myChart2" width="400" height="400"></canvas><canvas id="myChart3" width="400" height="400"></canvas><script>head.ready(function(){var a,r,t,e,n,o,i=document.getElementById("myChart").getContext("2d"),d=(new Chart(i,{type:"bar",data:{labels:["Red","Blue","Yellow","Green","Purple","Orange"],datasets:[{label:"# of Votes",data:[12,19,3,5,2,3],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),document.getElementById("myChart2").getContext("2d")),b=(new Chart(d,{type:"line",data:{labels:["春","夏","秋","冬"],datasets:[{fillColor:"rgba(0,0,0,0)",strokeColor:"rgba(220,180,0,1)",pointColor:"rgba(220,180,0,1)",data:[11,37,10,3]},{fillColor:"rgba(0,0,0,0)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",data:[9,29,15,1]}]},options:{responsive:!0,pointDotRadius:10,bezierCurve:!1,scaleShowVerticalLines:!1,scaleGridLineColor:"black"}}),document.getElementById("myChart3").getContext("2d"));new Chart(b,{type:"bar",data:{labels:["China","India","United States","Indonesia","Brazil","Pakistan","Nigeria","Bangladesh","Russia","Japan"],datasets:[{label:"Population",data:[1379302771,1281935911,326625791,260580739,207353391,204924861,190632261,157826578,142257519,126451398],backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)","rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)"]}]}});(a=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.01,10)).position.z=1,r=new THREE.Scene,e=new THREE.BoxGeometry(.2,.2,.2),n=new THREE.MeshNormalMaterial,o=new THREE.Mesh(e,n),r.add(o),(t=new THREE.WebGLRenderer({antialias:!0})).setSize(window.innerWidth,window.innerHeight),document.body.appendChild(t.domElement),function e(){requestAnimationFrame(e),o.rotation.x+=.01,o.rotation.y+=.02,t.render(r,a)}()})</script></body><h2 id="说到加载图片，我们可以谈些什么"><a href="#说到加载图片，我们可以谈些什么" class="headerlink" title="说到加载图片，我们可以谈些什么"></a><a href="http://litten.me/2015/04/28/img-lazy-load/" target="_blank" rel="noopener">说到加载图片，我们可以谈些什么</a></h2><p>滚屏加载<br>特殊状态处理<br>上报监控<br>居中截取<br>支持webp</p><h2 id="JAVASCRIPT-装载和执行"><a href="#JAVASCRIPT-装载和执行" class="headerlink" title="JAVASCRIPT 装载和执行"></a><a href="https://coolshell.cn/articles/9749.html" target="_blank" rel="noopener">JAVASCRIPT 装载和执行</a></h2><p>通常来说，浏览器对于Javascript的运行有两大特性：1）载入后马上执行，2）执行时会阻塞页面后续的内容（包括页面的渲染、其它资源的下载）。于是，如果有多个js文件被引入，那么对于浏览器来说，这些js文件被被串行地载入，并依次执行。</p><p>因为javascript可能会来操作HTML文档的DOM树，所以，浏览器一般都不会像并行下载css文件并行下载js文件，因为这是js文件的特殊性造成的。所以，如果你的javascript想操作后面的DOM元素，基本上来说，浏览器都会报错说对象找不到。因为Javascript执行时，后面的HTML被阻塞住了，DOM树时还没有后面的DOM结点。所以程序也就报错了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;</span><br><span class="line">    src=&quot;https://coolshell.cn/asyncjs/alert.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>基本上来说，head里的script标签会阻塞后续资源的载入以及整个页面的生成。我专门做了一个示例你可以看看：<a href="https://coolshell.cn/asyncjs/async_test01.html" target="_blank" rel="noopener">示例一</a>。 注意：我的alert.js中只有一句话：alert(“hello world”) ，这更容易让你看到javascript是怎么阻塞后面的东西的。</p><p>所以，你知道为什么有很多网站把javascript放在网页的最后面了，要么就是动用了window.onload或是docmuemt ready之类的事件。</p><p>另外，因为绝大多数的Javascript代码并不需要等页面，所以，我们异步载入的功能。那么我们怎么异步载入呢？</p><blockquote><p>document.write方式</p></blockquote><p>于是，你可能以为document.write()这种方式能够解决不阻塞的方式。你当然会觉得，document.write了的 script标签后就可以执行后面的东西去了，这没错。对于在同一个script标签里的Javascript的代码来说，是这样的，但是对于整个页面来说，这个还是会阻塞。 下面是一段测试代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot; language=&quot;javascript&quot;&gt;</span><br><span class="line">function loadjs(script_filename) &#123;</span><br><span class="line">    document.write(&apos;&lt;&apos; + &apos;script language=&quot;javascript&quot; type=&quot;text/javascript&quot;&apos;);</span><br><span class="line">    document.write(&apos; src=&quot;&apos; + script_filename + &apos;&quot;&gt;&apos;);</span><br><span class="line">    document.write(&apos;&lt;&apos;+&apos;/script&apos;+&apos;&gt;&apos;);</span><br><span class="line">    alert(&quot;loadjs() exit...&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var script = &apos;https://coolshell.cn/asyncjs/alert.js&apos;;</span><br><span class="line"></span><br><span class="line">loadjs(script);</span><br><span class="line">alert(&quot;loadjs() finished!&quot;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/javascript&quot; language=&quot;javascript&quot;&gt;</span><br><span class="line">alert(&quot;another block&quot;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>你觉得alert的顺序是什么？你可以在不同的浏览器里试一试。这里的想关的测试页面：<a href="https://coolshell.cn/asyncjs/async_test02.html" target="_blank" rel="noopener">示例二</a>。</p><blockquote><p>script的defer和async属性</p></blockquote><p>IE自从IE6就支持defer标签，如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script defer type=&quot;text/javascript&quot; src=&quot;./alert.js&quot; &gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>对于IE来说，这个标签会让IE并行下载js文件，并且把其执行hold到了整个DOM装载完毕（DOMContentLoaded），多个defer的 script 在执行时也会按照其出现的顺序来运行。最重要的是 script 被加上defer后，其不会阻塞后续DOM的的渲染。但是因为这个defer只是IE专用，所以一般用得比较少。</p><p>而我们标准的的HTML5也加入了一个异步载入javascript的属性：async，无论你对它赋什么样的值，只要它出现，它就开始异步加载js文件。但是， async的异步加载会有一个比较严重的问题，那就是它忠实地践行着“载入后马上执行”这条军规，所以，虽然它并不阻塞页面的渲染，但是你也无法控制他执行的次序和时机。你可以<a href="https://coolshell.cn/asyncjs/async_test01.async.html" target="_blank" rel="noopener">看看这个示例</a>去感受一下。</p><p>支持 async标签的浏览器是：Firefox3.6+，Chrome 8.0+，Safari 5.0+，IE 10+，Opera还不支持（来自<a href="http://caniuse.com/#feat=script-async" target="_blank" rel="noopener">这里</a>）所以这个方法也不是太好。因为并不是所有的浏览器你都能行。</p><blockquote><p>动态创建DOM方式</p></blockquote><p>这种方式可能是用得最多的了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function loadjs(script_filename) &#123;</span><br><span class="line">var script = document.createElement(&apos;script&apos;);</span><br><span class="line">script.setAttribute(&apos;type&apos;, &apos;text/javascript&apos;);</span><br><span class="line">script.setAttribute(&apos;src&apos;, script_filename);</span><br><span class="line">script.setAttribute(&apos;id&apos;, &apos;coolshell_script_id&apos;);</span><br><span class="line"></span><br><span class="line">script_id = document.getElementById(&apos;coolshell_script_id&apos;);</span><br><span class="line">if(script_id)&#123;</span><br><span class="line">    document.getElementsByTagName(&apos;head&apos;)[0].removeChild(script_id);</span><br><span class="line">&#125;</span><br><span class="line">document.getElementsByTagName(&apos;head&apos;)[0].appendChild(script);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var script = &apos;https://coolshell.cn/asyncjs/alert.js&apos;;</span><br><span class="line">loadjs(script);</span><br></pre></td></tr></table></figure><p>这个方式几乎成了标准的异步载入js文件的方式，这个方式的演示请参看：<a href="https://coolshell.cn/asyncjs/async_test03.html" target="_blank" rel="noopener">示例三</a>。这方式还被玩出了JSONP的东东，也就是我可以为script的src指定某个后台的脚本（如PHP），而这个PHP返回一个javascript函数，其参数是一个json的字符串，返回来调用我们的预先定义好的javascript的函数。你可以看一下这个示例：<a href="https://coolshell.cn/t.js" target="_blank" rel="noopener">t.js</a> （这个示例是我之前在微博征集的一个异步ajax调用的小例子）</p><blockquote><p>按需异步载入js</p></blockquote><p>上面那个DOM方式的例子解决了异步载入Javascript的问题，但是没有解决我们想让他按我们指定的时机运行的问题。所以，我们只需要把上面那个DOM方式绑到某个事件上来就可以了。</p><p>比如：</p><p>绑在window.load事件上——<a href="https://coolshell.cn/asyncjs/async_test04.html" target="_blank" rel="noopener">示例四</a></p><p>你一定要比较一下示例四和示例三在执行上有什么不同，我在这两个示例中都专门用了个代码高亮的javascript，看看那个代码高亮的的脚本的执行和我的alert.js的执行的情况，你就知道不同了）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.load = loadjs(&quot;https://coolshell.cn/asyncjs/alert.js&quot;)</span><br></pre></td></tr></table></figure><p>绑在特定的事件上——<a href="">示例五</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p style=&quot;cursor: pointer&quot; onclick=&quot;LoadJS()&quot;&gt;Click to load alert.js &lt;/p&gt;</span><br></pre></td></tr></table></figure><p>这个示例很简单了。当你点击某个DOM元素，才会真正载入我们的alert.js。</p><blockquote><p>更多</p></blockquote><p>但是，绑定在某个特定事件上这个事似乎又过了一点，因为只有在点击的时候才会去真正的下载js，这又会太慢了了。好了，到这里，要抛出我们的终极问题——我们想要异步地把js文件下载到用户的本地，但是不执行，仅当在我们想要执行的时候去执行。</p><p>要是我们有下面这样的方式就好了：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var script = document.createElement(&quot;script&quot;);</span><br><span class="line">script.noexecute = true;</span><br><span class="line">script.src = &quot;alert.js&quot;;</span><br><span class="line">document.body.appendChild(script);</span><br><span class="line"></span><br><span class="line">//后面我们可以这么干</span><br><span class="line">script.execute();</span><br></pre></td></tr></table></figure><p>可惜的是，这只是一个美丽的梦想，今天我们的Javascript还比较原始，这个“JS梦”还没有实现呢。</p><p>所以，我们的程序员只能使用hack的方式来搞。</p><p>有的程序员使用了非标准的script的type来cache javascript。如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=cache/script src=&quot;./alert.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>因为”cache/script”，这个东西根本就不能被浏览器解析，所以浏览器也就不能把alert.js当javascript去执行，但是他又要去下载js文件，所以就可以搞定了。可惜的是，webkit严格符从了HTML的标准——对于这种不认识的东西，直接删除，什么也不干。于是，我们的梦又破了。</p><p>所以，我们需要再hack一下，就像N多年前玩preload图片那样，我们可以动用object标签（也可以动用iframe标签），于是我们有下面这样的代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function cachejs(script_filename)&#123;</span><br><span class="line">var cache = document.createElement(&apos;object&apos;);</span><br><span class="line">cache.data = script_filename;</span><br><span class="line">cache.id = &quot;coolshell_script_cache_id&quot;;</span><br><span class="line">cache.width = 0;</span><br><span class="line">cache.height = 0;</span><br><span class="line">document.body.appendChild(cache);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后，我们在的最后调用一下这个函数。请参看一下相关的示例：<a href="https://coolshell.cn/asyncjs/async_test06.html" target="_blank" rel="noopener">示例六</a></p><p>在Chrome下按 Ctrl+Shit+I，切换到network页，你就可以看到下载了alert.js但是没有执行，然后我们再用示例五的方式，因为浏览器端有缓存了，不会再从服务器上下载alert.js了。所以，就能保证执行速度了。</p><p>关于这种preload这种东西你应该不会陌生了。你还可以使用Ajax的方式，如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var xhr = new XMLHttpRequest();</span><br><span class="line">xhr.open(&apos;GET&apos;, &apos;new.js&apos;);</span><br><span class="line">xhr.send(&apos;&apos;);</span><br></pre></td></tr></table></figure><p>到这里我就不再多说了，也不给示例了，大家可以自己试试去。</p><p>最后再提两个js，一个是<a href="http://stevesouders.com/controljs/" target="_blank" rel="noopener">ControlJS</a>，一个叫<a href="http://headjs.com/" target="_blank" rel="noopener">HeadJS</a>，专门用来做异步load javascript文件的。</p><p>好了，这是所有的内容了，希望大家看过后能对Javascript的载入和执行，以及相关的技术有个了解。同时，也希望各前端高手不吝赐教！</p><h2 id="统一处理异步的js回调"><a href="#统一处理异步的js回调" class="headerlink" title="统一处理异步的js回调"></a><a href="http://litten.me/2013/10/06/handling-asynchronous-js/" target="_blank" rel="noopener">统一处理异步的js回调</a></h2><p>js编程时经常会用到异步处理，而异步会带了所谓的并发问题。比如，你需要向服务器发出多个ajax请求，然后在返回所有结果后做进一步处理，同时要显示动画。因此我们需要用到以下的方案。</p><h2 id="web-worker简易入门"><a href="#web-worker简易入门" class="headerlink" title="web worker简易入门"></a><a href="http://litten.me/2013/09/25/web-worker-learning/" target="_blank" rel="noopener">web worker简易入门</a></h2><p>js是单线程的语言，由于此特性，我们在处理并发时需要用到一些技巧，如setTimeout()，setInterval()，调用XMLHttpRequest等。<br>但这里的并发只是非阻塞（参照John Resig的文章How JavaScript Timers Work），真正的多线程编程则需要HTML5的web worker。</p><h2 id="JavaScript教程"><a href="#JavaScript教程" class="headerlink" title="JavaScript教程"></a><a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000" target="_blank" rel="noopener">JavaScript教程</a></h2><p>为什么我们要学JavaScript？尤其是当你已经掌握了某些其他编程语言如Java、C++的情况下。</p><p>简单粗暴的回答就是：<strong>因为你没有选择</strong>。在Web世界里，只有JavaScript能跨平台、跨浏览器驱动网页，与用户交互。</p><p>随着HTML5在PC和移动端越来越流行，JavaScript变得更加重要了。并且，新兴的Node.js把JavaScript引入到了服务器端，JavaScript已经变成了全能型选手。</p><p>JavaScript严格区分大小写，如果弄错了大小写，程序将报错或者运行不正常。</p><p>Number<br>JavaScript不区分整数和浮点数，统一用Number表示，以下都是合法的Number类型：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">123; // 整数123</span><br><span class="line">0.456; // 浮点数0.456</span><br><span class="line">1.2345e3; // 科学计数法表示1.2345x1000，等同于1234.5</span><br><span class="line">-99; // 负数</span><br><span class="line">NaN; // NaN表示Not a Number，当无法计算结果时用NaN表示</span><br><span class="line">Infinity; // Infinity表示无限大，当数值超过了JavaScript的Number所能表示的最大值时，就表示为Infinity</span><br></pre></td></tr></table></figure><p>计算机由于使用二进制，所以，有时候用十六进制表示整数比较方便，十六进制用0x前缀和0-9，a-f表示，例如：0xff00，0xa5b4c3d2，等等，它们和十进制表示的数值完全一样。</p><h2 id="可视化"><a href="#可视化" class="headerlink" title="可视化"></a>可视化</h2><h3 id="Introducing-d3-express-the-integrated-discovery-environment"><a href="#Introducing-d3-express-the-integrated-discovery-environment" class="headerlink" title="Introducing d3.express: the integrated discovery environment."></a><a href="https://medium.com/@mbostock/a-better-way-to-code-2b1d2876a3a0" target="_blank" rel="noopener">Introducing d3.express: the integrated discovery environment.</a></h3><blockquote><p>The purpose of visualization is insight, not pictures.</p></blockquote><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><h3 id="最棒的-JavaScript-学习指南（2018版）"><a href="#最棒的-JavaScript-学习指南（2018版）" class="headerlink" title="最棒的 JavaScript 学习指南（2018版）"></a><a href="http://www.cnblogs.com/lhb25/p/javascript-book-2018.html" target="_blank" rel="noopener">最棒的 JavaScript 学习指南（2018版）</a></h3><h3 id="Web前端性能优化——编写高效的JavaScript"><a href="#Web前端性能优化——编写高效的JavaScript" class="headerlink" title="Web前端性能优化——编写高效的JavaScript"></a><a href="http://www.cnblogs.com/MarcoHan/p/5315361.html" target="_blank" rel="noopener">Web前端性能优化——编写高效的JavaScript</a></h3><h3 id="Web前端性能优化进阶——完结篇"><a href="#Web前端性能优化进阶——完结篇" class="headerlink" title="Web前端性能优化进阶——完结篇"></a><a href="http://www.cnblogs.com/MarcoHan/p/5297798.html" target="_blank" rel="noopener">Web前端性能优化进阶——完结篇</a></h3><h3 id="50-tips-of-JavaScript，这些坑你都知道吗？"><a href="#50-tips-of-JavaScript，这些坑你都知道吗？" class="headerlink" title="50 tips of JavaScript，这些坑你都知道吗？"></a><a href="http://www.cnblogs.com/MarcoHan/p/5324263.html" target="_blank" rel="noopener">50 tips of JavaScript，这些坑你都知道吗？</a></h3><h3 id="Chart-js"><a href="#Chart-js" class="headerlink" title="Chart.js"></a><a href="http://www.chartjs.org/docs/latest/" target="_blank" rel="noopener">Chart.js</a></h3><h3 id="Chart-js-文档"><a href="#Chart-js-文档" class="headerlink" title="Chart.js 文档"></a><a href="http://chartjs.cn/docs/" target="_blank" rel="noopener">Chart.js 文档</a></h3><h3 id="数据可视化—Chart-js使用总结"><a href="#数据可视化—Chart-js使用总结" class="headerlink" title="数据可视化—Chart.js使用总结"></a><a href="https://segmentfault.com/a/1190000012324227" target="_blank" rel="noopener">数据可视化—Chart.js使用总结</a></h3><h3 id="图表Chart-js入门教程"><a href="#图表Chart-js入门教程" class="headerlink" title="图表Chart.js入门教程"></a><a href="https://blog.csdn.net/cddcj/article/details/75542565" target="_blank" rel="noopener">图表Chart.js入门教程</a></h3><h3 id="一个文件夹的自我介绍"><a href="#一个文件夹的自我介绍" class="headerlink" title="一个文件夹的自我介绍"></a><a href="http://litten.me/2014/07/25/folder-to-tree/" target="_blank" rel="noopener">一个文件夹的自我介绍</a></h3><h2 id="Machine-Learning-in-Javascript-Introduction"><a href="#Machine-Learning-in-Javascript-Introduction" class="headerlink" title="Machine Learning in Javascript: Introduction"></a><a href="http://burakkanber.com/blog/machine-learning-in-other-languages-introduction/" target="_blank" rel="noopener">Machine Learning in Javascript: Introduction</a></h2><p><img src="http://p53s4d2qk.bkt.clouddn.com/machinelearning2018050702.jpg?imageMogr2/thumbnail/!75p" alt="machinelearning2018050702.jpg"></p><blockquote><p> To get good at something, you need to practice!</p></blockquote><p>I love machine learning algorithms. I’ve taught classes and seminars and given talks on ML. The subject is fascinating to me, but like all skills fascination simply isn’t enough. To get good at something, you need to practice!</p><p>I also happen to be a PHP and JavaScript developer. I’ve taught classes on both of these as well — but like any decent software engineer I have experience with Ruby, Python, Perl, and C. I just prefer PHP and JS. (Before you flame PHP, I’ll just say that while it has its problems, I like it because it gets stuff done.)</p><p>Whenever I say that Tidal Labs’ ML algorithms are in PHP, they look at me funny and ask me how it’s possible. Simple: it’s possible to write ML algorithms in just about any language. Most people just don’t care to learn the fundamentals strongly enough that they can write an algorithm from scratch. Instead, they rely on Python libraries to do the work for them, and end up not truly grasping what’s happening inside the black box. Other people only know ML academically, using Octave or Matlab.</p><p>Through this series of articles, I’ll teach you the fundamental machine learning algorithms using Javascript — not Python or Octave — as the example language. Originally I intended to write these articles in a variety of languages (PHP, JS, Perl, C, Ruby), but decided to stick with Javascript for the following reasons:</p><p>If you’re a web developer you probably already know JS, regardless of your backend expertise.<br>Javascript has JSFiddle, a great tool that lets me embed executable Javascript right in my posts (hard to do that with C or Perl!)<br>Several people asked me to stick to just one language.<br>While I’ll be writing these articles with Javascript in mind, please re-write the examples in your language of choice as homework! Practice is how you get better, and writing the same algorithm several times in different languages really helps you understand the paradigms better.<br>It’s possible to get excellent performance out of ML algorithms in languages like PHP and Javascript. I advocate writing ML algorithms in other languages because the practice of writing ML algorithms from scratch helps you learn them fundamentally, and it also helps you unify your backend by not requiring a Python script to do processing in the middle of a PHP application. You can do it in PHP, and cut out the (mental and computational) overhead of using another language.</p><p>… well, most of the time. There are some things you really can’t do in PHP or Javascript, but those are the more advanced algorithms that require heavy matrix math. While you can do matrix math in JS, there is a big difference between simply “doing matrix math” and doing it efficiently. The advantage of NumPy or Matlab is not in their ability to do matrix operations, it’s in the fact that they use optimized algorithms to do so — things you wouldn’t be able to do yourself unless you dedicate yourself to learning computational linear algebra. And that’s not my field, so we’ll just stick to the ML that doesn’t require the advanced matrix math. You could try brute-forcing the matrix operations, but you’ll end up with a relatively inefficient system. It’s great for learning, so I’m not discouraging it — I would just be wary of doing that in a production environment.</p><p>Keep in mind that most of the algorithms we’ll look at can be solved both with and without matrix math. We’ll use iterative or functional approaches here, but most of these algorithms can be done with linear algebra as well. There’s more than one way to skin a cat! I encourage you to also go and learn (or figure out) the linear algebra approaches, but since that’s not my strong suit I’ll use other approaches.</p><p>Here are some of the algorithms I intend to cover. I’ll update this list with links to the relevant articles as they’re published:</p><p>k-nearest-neighbor (<a href="http://burakkanber.com/blog/machine-learning-in-js-k-nearest-neighbor-part-1/" target="_blank" rel="noopener">Introduction</a>)<br>k-means clustering (<a href="http://burakkanber.com/blog/machine-learning-k-means-clustering-in-javascript-part-1/" target="_blank" rel="noopener">Part 1</a>)<br>Genetic algorithms (<a href="http://burakkanber.com/blog/machine-learning-genetic-algorithms-part-1-javascript/" target="_blank" rel="noopener">Part 1</a>, <a href="http://burakkanber.com/blog/machine-learning-genetic-algorithms-in-javascript-part-2/" target="_blank" rel="noopener">Part 2</a>)<br>Naive Bayes classifier (<a href="http://burakkanber.com/blog/machine-learning-naive-bayes-1/" target="_blank" rel="noopener">Part 1: Document Classification</a>)<br>Sentiment Analysis (<a href="http://burakkanber.com/blog/machine-learning-sentiment-analysis/" target="_blank" rel="noopener">Part 1</a>)<br>Full-text Search (<a href="http://burakkanber.com/blog/machine-learning-full-text-search-in-javascript-relevance-scoring/" target="_blank" rel="noopener">Part 1: Relevance Scoring</a>)<br>Neural network</p><p>Happy learning!</p><h2 id="Machine-Learning-in-JS-k-nearest-neighbor-Introduction"><a href="#Machine-Learning-in-JS-k-nearest-neighbor-Introduction" class="headerlink" title="Machine Learning in JS: k-nearest-neighbor Introduction"></a><a href="http://burakkanber.com/blog/machine-learning-in-js-k-nearest-neighbor-part-1/" target="_blank" rel="noopener">Machine Learning in JS: k-nearest-neighbor Introduction</a></h2><body><canvas id="canvas" width="400" height="400"></canvas><script>var Node=function(e){for(var s in e)this[s]=e[s]};Node.prototype.measureDistances=function(e,s){var t=s.max-s.min,a=e.max-e.min;for(var o in this.neighbors){var r=this.neighbors[o],n=r.rooms-this.rooms;n/=t;var i=r.area-this.area;i/=a,r.distance=Math.sqrt(n*n+i*i)}},Node.prototype.sortByDistance=function(){this.neighbors.sort(function(e,s){return e.distance-s.distance})},Node.prototype.guessType=function(e){var s={};for(var t in this.neighbors.slice(0,e)){var a=this.neighbors[t];s[a.type]||(s[a.type]=0),s[a.type]+=1}var o={type:!1,count:0};for(var r in s)s[r]>o.count&&(o.type=r,o.count=s[r]);return this.guess=o,s};var nodes,NodeList=function(e){this.nodes=[],this.k=e};NodeList.prototype.add=function(e){this.nodes.push(e)},NodeList.prototype.determineUnknown=function(){for(var e in this.calculateRanges(),this.nodes)if(!this.nodes[e].type){for(var s in this.nodes[e].neighbors=[],this.nodes)this.nodes[s].type&&this.nodes[e].neighbors.push(new Node(this.nodes[s]));this.nodes[e].measureDistances(this.areas,this.rooms),this.nodes[e].sortByDistance(),console.log(this.nodes[e].guessType(this.k))}},NodeList.prototype.calculateRanges=function(){for(var e in this.areas={min:1e6,max:0},this.rooms={min:1e6,max:0},this.nodes)this.nodes[e].rooms<this.rooms.min&&(this.rooms.min=this.nodes[e].rooms),this.nodes[e].rooms>this.rooms.max&&(this.rooms.max=this.nodes[e].rooms),this.nodes[e].area<this.areas.min&&(this.areas.min=this.nodes[e].area),this.nodes[e].area>this.areas.max&&(this.areas.max=this.nodes[e].area)},NodeList.prototype.draw=function(e){var s=this.rooms.max-this.rooms.min,t=this.areas.max-this.areas.min,a=document.getElementById(e).getContext("2d"),o=400,r=400;for(var n in a.clearRect(0,0,o,r),this.nodes){switch(a.save(),this.nodes[n].type){case"apartment":a.fillStyle="red";break;case"house":a.fillStyle="green";break;case"flat":a.fillStyle="blue";break;default:a.fillStyle="#666666"}var i=(this.nodes[n].rooms-this.rooms.min)*(o/s)*.9+20,h=(this.nodes[n].area-this.areas.min)*(r/t)*.9+20;if(h=Math.abs(h-r),a.translate(i,h),a.beginPath(),a.arc(0,0,5,0,2*Math.PI,!0),a.fill(),a.closePath(),!this.nodes[n].type){switch(this.nodes[n].guess.type){case"apartment":a.strokeStyle="red";break;case"house":a.strokeStyle="green";break;case"flat":a.strokeStyle="blue";break;default:a.strokeStyle="#666666"}var m=this.nodes[n].neighbors[this.k-1].distance*o;m*=.9,a.beginPath(),a.arc(0,0,m,0,2*Math.PI,!0),a.stroke(),a.closePath()}a.restore()}};var data=[{rooms:1,area:350,type:"apartment"},{rooms:2,area:300,type:"apartment"},{rooms:3,area:300,type:"apartment"},{rooms:4,area:250,type:"apartment"},{rooms:4,area:500,type:"apartment"},{rooms:4,area:400,type:"apartment"},{rooms:5,area:450,type:"apartment"},{rooms:7,area:850,type:"house"},{rooms:7,area:900,type:"house"},{rooms:7,area:1200,type:"house"},{rooms:8,area:1500,type:"house"},{rooms:9,area:1300,type:"house"},{rooms:8,area:1240,type:"house"},{rooms:10,area:1700,type:"house"},{rooms:9,area:1e3,type:"house"},{rooms:1,area:800,type:"flat"},{rooms:3,area:900,type:"flat"},{rooms:2,area:700,type:"flat"},{rooms:1,area:900,type:"flat"},{rooms:2,area:1150,type:"flat"},{rooms:1,area:1e3,type:"flat"},{rooms:2,area:1200,type:"flat"},{rooms:1,area:1300,type:"flat"}],run=function(){for(var e in nodes=new NodeList(3),data)nodes.add(new Node(data[e]));var s=Math.round(10*Math.random()),t=Math.round(2e3*Math.random());nodes.add(new Node({rooms:s,area:t,type:!1})),nodes.determineUnknown(),nodes.draw("canvas")};setInterval(run,5e3),run()</script></body></div><footer class="post-footer"><div class="post-tags"><a href="/tags/JavaScript/" rel="tag"><i class="fa fa-tag"></i> JavaScript</a></div><div class="post-widgets"><div class="wp_rating"><div id="wpac-rating"></div></div></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/Concept/Writing.html" rel="next" title="Writing"><i class="fa fa-chevron-left"></i> Writing</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/AI/HTML5.html" rel="prev" title="HTML5">HTML5<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> Overview</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/img/headonhill.jpg" alt="Author"><p class="site-author-name" itemprop="name">Author</p><p class="site-description motion-element" itemprop="description">Chief IPR Officer in AI Age</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">234</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/index.html"><span class="site-state-item-count">8</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/index.html"><span class="site-state-item-count">369</span> <span class="site-state-item-name">tags</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="http://blog.163.com/zhuxuanlv@126/" target="_blank" title="Blog"><i class="fa fa-fw fa-globe"></i> Blog</a></span><span class="links-of-author-item"><a href="mailto:deepcreator18@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span></div><div id="days"></div><script language="javascript">function show_date_time(){window.setTimeout("show_date_time()",1e3),BirthDay=new Date("04/01/2018 16:01:00"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=864e5,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),e_hrsold=24*(e_daysold-daysold),hrsold=setzero(Math.floor(e_hrsold)),e_minsold=60*(e_hrsold-hrsold),minsold=setzero(Math.floor(60*(e_hrsold-hrsold))),seconds=setzero(Math.floor(60*(e_minsold-minsold))),document.getElementById("days").innerHTML="Running: "+daysold+" Day     "+hrsold+" Hour     "+minsold+" Minute     "+seconds+" Second "}function setzero(e){return e<10&&(e="0"+e),e}show_date_time()</script></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#说到加载图片，我们可以谈些什么"><span class="nav-number">1.</span> <span class="nav-text">说到加载图片，我们可以谈些什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JAVASCRIPT-装载和执行"><span class="nav-number">2.</span> <span class="nav-text">JAVASCRIPT 装载和执行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#统一处理异步的js回调"><span class="nav-number">3.</span> <span class="nav-text">统一处理异步的js回调</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#web-worker简易入门"><span class="nav-number">4.</span> <span class="nav-text">web worker简易入门</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScript教程"><span class="nav-number">5.</span> <span class="nav-text">JavaScript教程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#可视化"><span class="nav-number">6.</span> <span class="nav-text">可视化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Introducing-d3-express-the-integrated-discovery-environment"><span class="nav-number">6.1.</span> <span class="nav-text">Introducing d3.express: the integrated discovery environment.</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考资料"><span class="nav-number">7.</span> <span class="nav-text">参考资料</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#最棒的-JavaScript-学习指南（2018版）"><span class="nav-number">7.1.</span> <span class="nav-text">最棒的 JavaScript 学习指南（2018版）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Web前端性能优化——编写高效的JavaScript"><span class="nav-number">7.2.</span> <span class="nav-text">Web前端性能优化——编写高效的JavaScript</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Web前端性能优化进阶——完结篇"><span class="nav-number">7.3.</span> <span class="nav-text">Web前端性能优化进阶——完结篇</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#50-tips-of-JavaScript，这些坑你都知道吗？"><span class="nav-number">7.4.</span> <span class="nav-text">50 tips of JavaScript，这些坑你都知道吗？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Chart-js"><span class="nav-number">7.5.</span> <span class="nav-text">Chart.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Chart-js-文档"><span class="nav-number">7.6.</span> <span class="nav-text">Chart.js 文档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据可视化—Chart-js使用总结"><span class="nav-number">7.7.</span> <span class="nav-text">数据可视化—Chart.js使用总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#图表Chart-js入门教程"><span class="nav-number">7.8.</span> <span class="nav-text">图表Chart.js入门教程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一个文件夹的自我介绍"><span class="nav-number">7.9.</span> <span class="nav-text">一个文件夹的自我介绍</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Machine-Learning-in-Javascript-Introduction"><span class="nav-number">8.</span> <span class="nav-text">Machine Learning in Javascript: Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Machine-Learning-in-JS-k-nearest-neighbor-Introduction"><span class="nav-number">9.</span> <span class="nav-text">Machine Learning in JS: k-nearest-neighbor Introduction</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span><span class="with-love" id="animate"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">Author</span></div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv" title="Total Visitors"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span><span class="site-pv" title="Total Views"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script type="text/javascript">var GUEST=["nick","mail","link"],guest="nick,mail,link";guest=guest.split(",").filter(function(e){return-1<GUEST.indexOf(e)}),new Valine({el:"#comments",verify:!1,notify:!1,appId:"TfzAWJSzk2L4jpj4gHaNsMbp-gzGzoHsz",appKey:"PXNkGhS05PxL7rV3N8gDlAQe",placeholder:"Just go go",avatar:"mm",meta:guest,pageSize:"10",visitor:!1})</script><script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script type="text/javascript">wpac_init=window.wpac_init||[],wpac_init.push({widget:"Rating",id:11184,el:"wpac-rating",color:"fc6423"}),function(){if(!("WIDGETPACK_LOADED"in window)){WIDGETPACK_LOADED=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//embed.widgetpack.com/widget.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t.nextSibling)}}()</script><style>.copy-btn{display:inline-block;padding:6px 12px;font-size:13px;font-weight:700;line-height:20px;color:#333;white-space:nowrap;vertical-align:middle;cursor:pointer;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;user-select:none;outline:0}.highlight-wrap .copy-btn{transition:opacity .3s ease-in-out;opacity:0;padding:2px 6px;position:absolute;right:4px;top:8px}.highlight-wrap .copy-btn:focus,.highlight-wrap:hover .copy-btn{opacity:1}.highlight-wrap{position:relative}</style><script>$(".highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("Copy").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),n=document.createElement("textarea");document.body.appendChild(n),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.value=e,n.select(),n.focus();var o=document.execCommand("copy");document.body.removeChild(n),o?$(this).text("Copied"):$(this).text("Copy failed"),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("Copy")},300)}).append(e)})</script></body></html>