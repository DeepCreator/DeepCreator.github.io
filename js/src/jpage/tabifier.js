var level=0,LOOP_SIZE=100;function finishTabifier(e){e=(e=(e=e.replace(/\n\s*\n/g,"\n")).replace(/^[\s\n]*/,"")).replace(/[\s\n]*$/,""),level=0}function cleanHTML(a){var n=0;var l=0,s=null,c=null,i="",f="",h="";return function e(){for(var r=n;n<a.length&&n<r+LOOP_SIZE;n++){if(l=n,-1==a.substr(n).indexOf("<"))return void finishTabifier(f+=a.substr(n));for(;"<"!=a.charAt(l);)l++;for(n!=l&&((h=a.substr(n,l-n)).match(/^\s+$/)||("\n"==f.charAt(f.length-1)?f+=tabs():"\n"==h.charAt(0)&&(f+="\n"+tabs(),h=h.replace(/^\s+/,"")),h=h.replace(/\s+/g," "),f+=h),h.match(/\n/)&&(f+="\n"+tabs())),s=l;">"!=a.charAt(l);)l++;if(i=a.substr(s,l-s),n=l,"!--"==i.substr(1,3)){if(!i.match(/--$/)){for(;"--\x3e"!=a.substr(l,3);)l++;l+=2,i=a.substr(s,l-s),n=l}"\n"!=f.charAt(f.length-1)&&(f+="\n"),f+=tabs(),f+=i+">\n"}else"!"==i[1]?f=placeTag(i+">",f):"?"==i[1]?f+=i+">\n":(t=i.match(/^<(script|style)/i))?(t[1]=t[1].toLowerCase(),i=cleanTag(i),f=placeTag(i,f),(c=String(a.substr(n+1)).toLowerCase().indexOf("</"+t[1]))&&(h=a.substr(n+1,c),n+=c,f+=h)):(i=cleanTag(i),f=placeTag(i,f))}n<a.length?e():finishTabifier(f)}(),f}function tabs(){for(var e="",r=0;r<level;r++)e+="\t";return e}function cleanTag(e){var r="",a="";(e=(e=(e=e.replace(/\n/g," ")).replace(/[\s]{2,}/g," ")).replace(/^\s+|\s+$/g," ")).match(/\/$/)&&(a="/",e=e.replace(/\/+$/,"")),e=(e=e.replace(/^\s+|\s+$/g," ")).split(" ");for(var t=0;t<e.length;t++)if(-1==e[t].indexOf("="))r+=e[t].toLowerCase()+" ";else{var n=e[t].indexOf("="),l=[e[t].substr(0,n),e[t].substr(n+1)];r+=l[0].toLowerCase()+"=";var s=l[1].charAt(0);if("'"==s||'"'==s){for(r+=l[1];s!=String(e[t]).charAt(String(e[t]).length-1);)r+=" "+e[++t];r+=" "}else r+="'"+l[1]+"' "}return r.replace(/\s*$/,"")+a+">"}var ownLine=["area","body","head","hr","i?frame","link","meta","noscript","style","table","tbody","thead","tfoot"],contOwnLine=["li","dt","dt","h[1-6]","option","script"],lineBefore=new RegExp("^<(/?"+ownLine.join("|/?")+"|"+contOwnLine.join("|")+")[ >]");lineAfter=new RegExp("^<(br|/?"+ownLine.join("|/?")+"|/"+contOwnLine.join("|/")+")[ >]");var newLevel=["blockquote","div","dl","fieldset","form","frameset","map","ol","p","pre","select","td","th","tr","ul"];function placeTag(e,r){var a=e.match(newLevel);return(e.match(lineBefore)||a)&&(r=r.replace(/\s*$/,""),r+="\n"),a&&"/"==e.charAt(1)&&level--,"\n"==r.charAt(r.length-1)&&(r+=tabs()),a&&"/"!=e.charAt(1)&&level++,r+=e,(e.match(lineAfter)||e.match(newLevel))&&(r=r.replace(/ *$/,""),r+="\n"),r}function cleanCSS(a){var t,n=0,l=!1;"\n"==a[0]&&(a=a.substr(1)),a=(a=(a=(a=(a=a.replace(/([^\/])?\n*/g,"$1")).replace(/\n\s+/g,"\n")).replace(/[	 ]+/g," ")).replace(/\s?([;:{},+>])\s?/g,"$1")).replace(/\{(.*):(.*)\}/g,"{$1: $2}");var s=tabs(),c=level;return function e(){for(var r=n;n<a.length&&n<r+LOOP_SIZE;n++)t=a.charAt(n),l?(l==t&&(l=!1),s+=t):"{"==t?(level++,s+=" {\n"+tabs()):"}"==t?(s=s.replace(/\s*$/,""),level--,s+="\n"+tabs()+"}\n"+tabs()):'"'==t||"'"==t?(l=(!l||t!=l)&&t,s+=t):s+=";"==t?";\n"+tabs():"\n"==t?"\n"+tabs():t;n<a.length?e():(level=c,finishTabifier(s=s.replace(/[\s\n]*$/,"")))}(),s}function cleanCStyle(a){var t=0;a=(a=(a=a.replace(/^[\s\n]*/,"")).replace(/[\s\n]*$/,"")).replace(/[\n\r]+/g,"\n");var n=tabs(),l=level,s="",c=!1,i=!1,f=!1;return function e(){for(var r=t;t<a.length&&t<r+LOOP_SIZE;t++)if(s=a.charAt(t),f){if("//"==f&&"\n"==s?f=!1:"/*"==f&&"*/"==a.substr(t,2)&&(f=!1,s="*/\n",t++),!f){for(;a.charAt(++t).match(/\s/););t--,s+=tabs()}n+=s}else if(i)i!=s||"\\"==a.charAt(t-1)&&"\\"!=a.charAt(t-2)||(i=!1),n+=s;else if(c&&"("==s)c++,n+=s;else if(c&&")"==s)c--,n+=s;else if("else"==a.substr(t,4))n=n.replace(/\s*$/,"")+" e";else if(a.substr(t).match(/^for\s*\(/))for(c=1,n+="for (";"("!=a.charAt(++t););else if("//"==a.substr(t,2))n+=f="//",t++;else if("/*"==a.substr(t,2))f="/*",n+="\n"+tabs()+"/*",t++;else if('"'==s||"'"==s)i=(!i||s!=i)&&s,n+=s;else if("{"==s){for(level++,n=n.replace(/\s*$/,"")+" {\n"+tabs();a.charAt(++t).match(/\s/););t--}else if("}"==s){for(n=n.replace(/\s*$/,""),level--,n+="\n"+tabs()+"}\n"+tabs();a.charAt(++t).match(/\s/););t--}else if(";"!=s||c)n+="\n"==s?"\n"+tabs():s;else{for(n+=";\n"+tabs();a.charAt(++t).match(/\s/););t--}t<a.length?e():(level=l,finishTabifier(n=n.replace(/[\s\n]*$/,"")))}(),n}function cleanJson(a){var t=0;a=(a=(a=a.replace(/^[\s\n]*/,"")).replace(/[\s\n]*$/,"")).replace(/[\n\r]+/g,"\n");var n=tabs(),l=level,s="",c=!1;return function e(){for(var r=t;t<a.length&&t<r+LOOP_SIZE;t++)if(s=a.charAt(t),c)c!=s||"\\"==a.charAt(t-1)&&"\\"!=a.charAt(t-2)||(c=!1),n+=s;else if('"'==s||"'"==s)c=(!c||s!=c)&&s,n+=s;else if("{"==s||"["==s){for(level++,n+=s+"\n"+tabs();a.charAt(++t).match(/\s/););t--}else if("}"==s||"]"==s){for(n=n.replace(/\s*$/,""),level--,n.match(/({|\[)$/)||(n+="\n"+tabs()),n+=s;a.charAt(++t).match(/\s/););t--}else if(","==s){for(n+=",\n"+tabs();a.charAt(++t).match(/\s/););t--}else n+=s;t<a.length?e():(level=l,finishTabifier(n=n.replace(/[\s\n]*$/,"")))}(),n}newLevel=new RegExp("^</?("+newLevel.join("|")+")[ >]");